import{h as p,r as a,f as v,j as e,d as j}from"./index-BiMpKAyZ.js";import{M,a as g}from"./MovieGridSkeleton-Cf5YA0MP.js";import"./MovieCardSkeleton-CVHw-g3d.js";const A=()=>{const[f]=p(),s=f.get("q")||"",[n,u]=a.useState([]),[l,d]=a.useState([]),[i,m]=a.useState(!0);return a.useEffect(()=>{(async()=>{m(!0);try{const r=(await j.collection("movies").get()).docs.map(o=>({id:o.id,...o.data()}));u(r)}catch(t){console.error("Error fetching movies for search page:",t)}finally{m(!1)}})()},[]),a.useEffect(()=>{if(!i&&s){const c=n.filter(t=>v(s,t.title));c.sort((t,r)=>{var x,h;const o=(x=t.createdAt)!=null&&x.toMillis?t.createdAt.toMillis():0;return((h=r.createdAt)!=null&&h.toMillis?r.createdAt.toMillis():0)-o}),d(c)}else d([]);window.scrollTo(0,0)},[s,n,i]),i?e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8",children:['جاري البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"']}),e.jsx(M,{count:12})]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8 border-r-4 border-cyan-400 pr-4",children:['نتائج البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"',e.jsxs("span",{className:"text-lg font-normal text-slate-400 mr-2",children:["(",l.length," نتيجة)"]})]}),l.length>0?e.jsx(g,{movies:l}):e.jsxs("div",{className:"text-center p-12 bg-slate-800/50 rounded-lg mt-8",children:[e.jsx("p",{className:"text-2xl text-slate-300 mb-4",children:"لا توجد أفلام تطابق بحثك."}),e.jsx("p",{className:"text-slate-400",children:"حاول استخدام كلمات رئيسية مختلفة."})]})]})};export{A as default};
