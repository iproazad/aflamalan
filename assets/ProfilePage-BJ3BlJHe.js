import{u as S,r as a,j as e,e as u}from"./index-Xnn5P2js.js";const k=()=>{const{currentUser:t,refreshUser:w}=S(),[o,l]=a.useState(""),[r,n]=a.useState(""),[d,h]=a.useState(!1),[g,c]=a.useState(""),[p,i]=a.useState(""),[v,U]=a.useState(!1),[b,y]=a.useState(!1),[f,j]=a.useState(""),[N,m]=a.useState("");if(a.useEffect(()=>{t&&(l(t.displayName||""),n(t.photoURL||""))},[t]),a.useEffect(()=>{if(!t)return;const s=o!==(t.displayName||""),x=r!==(t.photoURL||"");U(s||x)},[o,r,t]),!t)return e.jsx("p",{children:"Please log in to view your profile."});const P=()=>{if(r)return r;const s=o||t.email||"A";return`https://ui-avatars.com/api/?name=${encodeURIComponent(s)}&background=161B22&color=E6EDF3&bold=true`},R=()=>{t&&(l(t.displayName||""),n(t.photoURL||"")),i(""),c("")},E=async s=>{if(s.preventDefault(),!!u.currentUser){h(!0),i(""),c("");try{await u.currentUser.updateProfile({displayName:o.trim(),photoURL:r.trim()}),await w(),c("تم تحديث الملف الشخصي بنجاح!")}catch(x){i("فشل تحديث الملف الشخصي. يرجى المحاولة مرة أخرى."),console.error("Profile Update Error:",x)}finally{h(!1)}}},L=async()=>{if(!t.email){m("لا يوجد عنوان بريد إلكتروني مرتبط بهذا الحساب.");return}y(!0),j(""),m("");try{await u.sendPasswordResetEmail(t.email),j("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني. يرجى التحقق من صندوق الوارد الخاص بك.")}catch(s){m("فشل في إرسال البريد الإلكتروني لإعادة تعيين كلمة المرور. يرجى المحاولة مرة أخرى."),console.error("Password Reset Error:",s)}finally{y(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto animate-fade-in",children:[e.jsx("h1",{className:"text-4xl font-black text-white mb-8 border-r-4 border-cyan-400 pr-4",children:"الملف الشخصي"}),e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-lg space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-400",children:"البريد الإلكتروني"}),e.jsx("p",{className:"text-xl text-white",children:t.email})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6 border-t border-gray-700 pt-8",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-400 -mt-2 mb-4",children:"تعديل الملف الشخصي"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[e.jsx("img",{src:P(),alt:"Profile",className:"w-24 h-24 rounded-full object-cover bg-gray-700 border-2 border-gray-600"}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-1",children:"الاسم المعروض"}),e.jsx("input",{type:"text",id:"displayName",value:o,onChange:s=>l(s.target.value),className:"block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"اسمك"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"photoURL",className:"block text-sm font-medium text-gray-300 mb-1",children:"رابط صورة الملف الشخصي"}),e.jsx("input",{type:"url",id:"photoURL",value:r,onChange:s=>n(s.target.value),className:"block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"https://example.com/image.png"})]})]})]}),g&&e.jsx("p",{className:"text-green-400 text-sm text-center",children:g}),p&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:p}),v&&e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:R,disabled:d,className:"bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:d,className:"bg-cyan-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-cyan-800 disabled:cursor-not-allowed",children:d?"جاري الحفظ...":"حفظ التغييرات"})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-8",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-400 mb-2",children:"تغيير كلمة المرور"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"سنرسل لك بريدًا إلكترونيًا يحتوي على رابط لإعادة تعيين كلمة المرور الخاصة بك."}),e.jsx("button",{onClick:L,disabled:b,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-500 transition-colors disabled:bg-gray-500/50 disabled:cursor-not-allowed",children:b?"جاري الإرسال...":"إرسال بريد إلكتروني لإعادة التعيين"}),f&&e.jsx("p",{className:"mt-4 text-green-400 text-sm",children:f}),N&&e.jsx("p",{className:"mt-4 text-red-400 text-sm",children:N})]})]})]})};export{k as default};
