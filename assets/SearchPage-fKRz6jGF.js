import{a as u,r as a,f as v,j as e,d as j}from"./index-Dh8Pkb-q.js";import{M}from"./MovieGrid-CLmviSHu.js";import{M as g}from"./MovieGridSkeleton-B5NCI3A8.js";import"./useWatchLater-BiQ9AbZF.js";import"./MovieCardSkeleton-mlncPtAb.js";const E=()=>{const[f]=u(),s=f.get("q")||"",[n,p]=a.useState([]),[i,d]=a.useState([]),[l,m]=a.useState(!0);return a.useEffect(()=>{(async()=>{m(!0);try{const r=(await j.collection("movies").get()).docs.map(o=>({id:o.id,...o.data()}));p(r)}catch(t){console.error("Error fetching movies for search page:",t)}finally{m(!1)}})()},[]),a.useEffect(()=>{if(!l&&s){const c=n.filter(t=>v(s,t.title));c.sort((t,r)=>{var x,h;const o=(x=t.createdAt)!=null&&x.toMillis?t.createdAt.toMillis():0;return((h=r.createdAt)!=null&&h.toMillis?r.createdAt.toMillis():0)-o}),d(c)}else d([]);window.scrollTo(0,0)},[s,n,l]),l?e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8",children:['جاري البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"']}),e.jsx(g,{count:12})]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8 border-r-4 border-cyan-400 pr-4",children:['نتائج البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"',e.jsxs("span",{className:"text-lg font-normal text-slate-400 mr-2",children:["(",i.length," نتيجة)"]})]}),i.length>0?e.jsx(M,{movies:i}):e.jsxs("div",{className:"text-center p-12 bg-slate-800/50 rounded-lg mt-8",children:[e.jsx("p",{className:"text-2xl text-slate-300 mb-4",children:"لا توجد أفلام تطابق بحثك."}),e.jsx("p",{className:"text-slate-400",children:"حاول استخدام كلمات رئيسية مختلفة."})]})]})};export{E as default};
