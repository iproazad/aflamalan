import{b as v,r as o,f as g,j as e,e as j}from"./index-DHK5cvRJ.js";import{M as N}from"./MovieGrid-DNh_sAbN.js";import{M}from"./MovieGridSkeleton-DB659YRz.js";import"./useWatchLater-BcOOIyUy.js";import"./MovieCardSkeleton-DdmktY3e.js";const D=()=>{const[p]=v(),s=p.get("q")||"",[l,u]=o.useState([]),[i,m]=o.useState([]),[c,d]=o.useState(!0);return o.useEffect(()=>{(async()=>{d(!0);try{const a=(await j.collection("movies").get()).docs.map(r=>({id:r.id,...r.data()}));u(a)}catch(t){console.error("Error fetching movies for search page:",t)}finally{d(!1)}})()},[]),o.useEffect(()=>{if(!c&&s){const n=l.filter(t=>g(s,t.title));n.sort((t,a)=>{var h,f;const r=(h=t.createdAt)!=null&&h.toDate?t.createdAt.toDate().getTime():new Date(t.createdAt).getTime(),x=(f=a.createdAt)!=null&&f.toDate?a.createdAt.toDate().getTime():new Date(a.createdAt).getTime();return(isNaN(x)?0:x)-(isNaN(r)?0:r)}),m(n)}else m([]);window.scrollTo(0,0)},[s,l,c]),c?e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8",children:['جاري البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"']}),e.jsx(M,{count:12})]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8 border-r-4 border-cyan-400 pr-4",children:['نتائج البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"',e.jsxs("span",{className:"text-lg font-normal text-slate-400 mr-2",children:["(",i.length," نتيجة)"]})]}),i.length>0?e.jsx(N,{movies:i}):e.jsxs("div",{className:"text-center p-12 bg-slate-800/50 rounded-lg mt-8",children:[e.jsx("p",{className:"text-2xl text-slate-300 mb-4",children:"لا توجد أفلام تطابق بحثك."}),e.jsx("p",{className:"text-slate-400",children:"حاول استخدام كلمات رئيسية مختلفة."})]})]})};export{D as default};
