import{r,e as g,u as b,j as e,A as w,L as y,k as x,m as j}from"./index-Dz2DXnM8.js";const N=()=>{const[l,m]=r.useState(""),[c,f]=r.useState(""),[i,t]=r.useState(""),[d,u]=r.useState(!1),o=g(),{currentUser:n}=b();r.useEffect(()=>{n&&(n.isAdmin?o("/admin",{replace:!0}):o("/",{replace:!0}))},[n,o]);const p=async s=>{s.preventDefault(),t("");try{await x.signInWithEmailAndPassword(l,c)}catch(a){a.code==="auth/user-not-found"||a.code==="auth/wrong-password"||a.code==="auth/invalid-credential"?t("البريد الإلكتروني أو كلمة المرور غير صحيحة."):(t("حدث خطأ أثناء تسجيل الدخول. يرجى المحاولة مرة أخرى."),console.error("Login Error:",a))}},h=async()=>{t(""),u(!0);try{await x.signInWithPopup(j)}catch(s){s.code==="auth/account-exists-with-different-credential"?t("يوجد حساب بالفعل بنفس عنوان البريد الإلكتروني ولكن ببيانات اعتماد تسجيل دخول مختلفة. حاول تسجيل الدخول باستخدام الطريقة المرتبطة بهذا البريد الإلكتروني."):s.code==="auth/popup-closed-by-user"?console.log("Google Sign-In popup closed by user."):(t("فشل تسجيل الدخول باستخدام جوجل. يرجى المحاولة مرة أخرى."),console.error("Google Sign-In Error:",s))}finally{u(!1)}};return e.jsx("div",{className:"flex items-center justify-center py-12 animate-fade-in-up",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-slate-800 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(w,{}),e.jsx("h2",{className:"text-3xl font-extrabold text-center text-white",children:"تسجيل الدخول إلى حسابك"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:p,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsx("div",{children:e.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border-2 border-slate-600 bg-slate-700 text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 focus:z-10 sm:text-sm rounded-t-md",placeholder:"البريد الإلكتروني",value:l,onChange:s=>m(s.target.value)})}),e.jsx("div",{children:e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border-2 border-slate-600 bg-slate-700 text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 focus:z-10 sm:text-sm rounded-b-md",placeholder:"كلمة المرور",value:c,onChange:s=>f(s.target.value)})})]}),i&&e.jsx("p",{className:"text-red-400 text-center text-sm bg-red-500/10 p-2 rounded-md",children:i}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-md text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 focus:ring-offset-slate-800 transition-all duration-300",children:"تسجيل الدخول"})})]}),e.jsxs("div",{className:"relative flex py-2 items-center",children:[e.jsx("div",{className:"flex-grow border-t border-slate-600"}),e.jsx("span",{className:"flex-shrink mx-4 text-slate-400 text-sm",children:"أو"}),e.jsx("div",{className:"flex-grow border-t border-slate-600"})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:h,disabled:d,className:"w-full flex justify-center items-center gap-3 py-3 px-4 border border-slate-600 rounded-md shadow-sm text-sm font-medium text-white bg-slate-700 hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 focus:ring-offset-slate-800 transition-colors disabled:opacity-50 disabled:cursor-wait",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"جاري التحويل إلى جوجل..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:e.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 110.1 512 0 401.9 0 265.8 0 129.7 110.1 20 244 20c65.4 0 123.5 24.3 166.4 65.7L345.2 159.5C318.1 135.1 283.8 120 244 120c-77.3 0-140.2 62.9-140.2 140.2s62.9 140.2 140.2 140.2c84.2 0 121.7-65.2 125.8-97.5H244V261.8h244z"})}),e.jsx("span",{children:"تسجيل الدخول باستخدام جوجل"})]})})}),e.jsxs("p",{className:"text-center text-sm text-slate-400",children:["ليس لديك حساب؟"," ",e.jsx(y,{to:"/register",className:"font-medium text-cyan-400 hover:text-cyan-300 hover:underline",children:"أنشئ حسابًا"})]})]})})};export{N as default};
