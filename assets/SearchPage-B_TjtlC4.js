import{a as f,r as a,f as h,j as e,s as u}from"./index-BwkEdhce.js";import{M as p}from"./MovieGrid-DSgj8jXA.js";import{M as j}from"./MovieGridSkeleton-DtWdXLTa.js";import"./useWatchLater-BKOYFJ0O.js";import"./MovieCardSkeleton-CP5jx96s.js";const w=()=>{const[d]=f(),s=d.get("q")||"",[i,x]=a.useState([]),[o,n]=a.useState([]),[l,m]=a.useState(!0);return a.useEffect(()=>{(async()=>{m(!0);try{const{data:t,error:r}=await u.from("movies").select("*");if(r)throw r;x(t)}catch(t){console.error("Error fetching movies for search page:",t)}finally{m(!1)}})()},[]),a.useEffect(()=>{if(!l&&s){const c=i.filter(t=>h(s,t.title));c.sort((t,r)=>new Date(r.created_at).getTime()-new Date(t.created_at).getTime()),n(c)}else n([]);window.scrollTo(0,0)},[s,i,l]),l?e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8",children:['جاري البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"']}),e.jsx(j,{count:12})]}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-8 border-r-4 border-cyan-400 pr-4",children:['نتائج البحث عن "',e.jsx("span",{className:"text-cyan-400",children:s}),'"',e.jsxs("span",{className:"text-lg font-normal text-slate-400 mr-2",children:["(",o.length," نتيجة)"]})]}),o.length>0?e.jsx(p,{movies:o}):e.jsxs("div",{className:"text-center p-12 bg-slate-800/50 rounded-lg mt-8",children:[e.jsx("p",{className:"text-2xl text-slate-300 mb-4",children:"لا توجد أفلام تطابق بحثك."}),e.jsx("p",{className:"text-slate-400",children:"حاول استخدام كلمات رئيسية مختلفة."})]})]})};export{w as default};
